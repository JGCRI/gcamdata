<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Input Files • gcamdata</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="Input Files">
<meta property="og:description" content="gcamdata">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">gcamdata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">5.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../../articles/getting-started/getting-started.html">Getting Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/driverdrake_vignette.html">driver_drake</a>
    </li>
    <li>
      <a href="../../articles/usermod_vignette.html">User Modification Functions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Reference
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/JGCRI/gcamdata/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="input_data_documentation_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Input Files</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JGCRI/gcamdata/blob/HEAD/vignettes/changing-the-data-system/input_data_documentation.Rmd" class="external-link"><code>vignettes/changing-the-data-system/input_data_documentation.Rmd</code></a></small>
      <div class="hidden name"><code>input_data_documentation.Rmd</code></div>

    </div>

    
    
<p>Most input files are comma separated value (CSV). We require csv files to have certain metadata headers, as described below.</p>
<div class="section level2">
<h2 id="documenting-input-files">Documenting input files<a class="anchor" aria-label="anchor" href="#documenting-input-files"></a>
</h2>
<p>All CSV input files should have a header that looks something like this:</p>
<pre><code># File: filename [REQUIRED]
# Title: Title of dataset [REQUIRED]
# Units: Units [REQUIRED]
# Comments: Comments, may be multiline
# Description: A synonym for comments, may be multiline
# Source: Citation or source if available
# Column types: iiccnn [REQUIRED]
(data starts here)</code></pre>
<p>You may use “Unit” or “Units”; “Comments” or “Description”; and “Reference”, “References”, “Source”, or “Sources”.</p>
<p>The “Column types” header line above is now mandatory, and gives the type (technically, the R <em>class</em>) that should be assigned to each column. The most common types are “i”=integer, “n”=numeric, “c”=character (string), and “l”=logical. A full list of supported types can be found <a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">here</a>. Note that an “admin” (i.e. not exported) function called <code>add_column_types_header_line</code> is provided which will guess column types and update CSV files that did not include this metadata (by default: <code>overwrite = FALSE</code>) for you.</p>
<div class="section level3">
<h3 id="units">Units<a class="anchor" aria-label="anchor" href="#units"></a>
</h3>
<p>If the data in this source file all have one unit, that unit should be provided as noted above. Some other situations that may be encountered are noted below and how they should be abbreviated:</p>
<table class="table">
<colgroup>
<col width="42%">
<col width="57%">
</colgroup>
<thead><tr class="header">
<th>Unit or situation</th>
<th>Example ‘Units’ entry</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>No units</td>
<td>NA or None</td>
</tr>
<tr class="even">
<td>Unitless</td>
<td>Unitless</td>
</tr>
<tr class="odd">
<td>Variables with more than one unit in the same table</td>
<td>Mt for ‘x’, USD1990 for ‘y’</td>
</tr>
<tr class="even">
<td>Units given as a column (or perhaps row) in the csv table</td>
<td>Units-in-table</td>
</tr>
</tbody>
</table>
<p><strong>Do not guess at units!</strong> Find the original source file or ask someone if you are not certain. As a last resort, “unknown” is acceptable (but in that case be sure to open an issue).</p>
</div>
<div class="section level3">
<h3 id="other-tips">Other Tips<a class="anchor" aria-label="anchor" href="#other-tips"></a>
</h3>
<ul>
<li><p>Be careful with editing in Excel (e.g., a comma within a line will result in a tab and the remainder of the line will not be read in by the metadata parser)</p></li>
<li><p>Please compress any file larger than ~1 MB (giving it either a <code>.zip</code> or <code>.gz</code> extension).</p></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="proprietary-data-files">Proprietary data files<a class="anchor" aria-label="anchor" href="#proprietary-data-files"></a>
</h2>
<p>There is one proprietary dataset used in gcamdata at present: the IEA’s <a href="http://data.iea.org/payment/products/117-world-energy-balances.aspx" class="external-link">World Energy Balances</a>. At present gcamdata uses the 2019 edition. While the “pre-built data” that comes with the package (in <code>R/sysdata.rda</code>) allows users to run gcamdata without using the energy balances, certain modifications such as re-configuring GCAM’s regions do require users to have the energy balances within the workspace. Because the dataset is proprietary, it can’t be distributed; rather, users will need to purchase the dataset, and perform the following steps in order to get the correct file correctly in gcamdata. The following steps are performed on a PC, starting from the data browser that comes with the World Energy Balances.</p>
<ol style="list-style-type: decimal">
<li>In Beyond browser, drag fields to create a table with fields COUNTRY, FLOW, PRODUCT. Click on FLOW, then go to Dimension -&gt; Edit dimension and change the label field to CODE. (E.g., It should be INDPROD instead of Production). The size of the file should be about 236 Mb.</li>
<li>Using a text editor (see note below), add header information to the CSV file. The first lines of the file should appear as follows:</li>
</ol>
<pre><code># File: IEA_EnergyBalances_2019.csv.gz
# Title: IEA World Energy Balances (2019 edition)
# Units: ktoe; GWh; TJ
# Column types: cccnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn
# ----------
COUNTRY,FLOW,PRODUCT,1960, ...
World,INDPROD,Hard coal (if no detail),, ...</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Using a text editor, clean the csv file (see note below):</li>
</ol>
<ul>
<li>delete three empty cells in the first row, cell “YEAR, and the empty second row.</li>
<li>“China (P.R. of China and Hong Kong, China)” - replace with China (P.R. of China and Hong Kong)</li>
<li>People’s Republic of China - replace with Peoples Republic of China</li>
<li>Democratic People’s Republic of Korea - replace with Dem. Peoples Rep. of Korea</li>
<li>Côte d’Ivoire - replace with Cote dIvoire</li>
<li>Curaçao - replace with Curacao</li>
<li>Plurinational State of Bolivia - replace with Bolivia</li>
<li>replace all “c” (confidential data) with “..” which then will be replaced with zero in R.</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li>Save it using GZ compression with the following filename: <code>IEA_EnergyBalances_2019.csv.gz</code>, and place it in the following folder in the gcamdata package: <code>inst/extdata/energy/</code>
</li>
</ol>
<p>NOTE: NEVER use Excel to clean the csv. Excel can only open part of the file, and the rest will be missing. If you use a PC, do not use Notepad (it takes 3 minutes per operation). Instead, use another, more powerful editor, like Sublime text editor.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Russell Horowitz, Ben Bond-Lamberty, Katherine Calvin, Ryna Cui, Kalyn Dorheim, Leyang Feng, Jill Horing, Page Kyle, Robert Link, Pralit Patel, Christopher Roney, Abigail Snyder, Aaron Staniszweski, Sean Turner, Matthew Binsted, Zarrar Khan.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
